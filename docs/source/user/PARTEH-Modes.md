# PARTEH Mode

The Plant Allocation and Reactive Transport Extensible Hypotheses (PARTEH) module, like the name implies, handles all things related to growth, allocation and transport.  Here is a link to the
[PARTEH Technical Documentation](https://fates-docs.readthedocs.io/en/latest/fates_tech_note.html#allocation-and-reactive-transport-parteh).

Two modes are available.  Either a carbon-only mode, or a nutrient enabled mode.

## The carbon-only (non nutrient enabled), allometric growth hypothesis.

This mode is set by default in the namelist.  The namelist entry generated will look like this:

> fates_parteh_mode = 1

List of key parameters in the parameter file (see [default](https://github.com/NGEET/fates/blob/master/parameter_files/fates_params_default.cdl)): 

All allometry coefficients are critical to growth, these parameters are mostly dimensioned by "pft", and should all start with prefix `fates_allom_*`.

`fates_leaf_stor_priority`, which governs the replacement priority between leaves, fine-roots and storage, is dimensioned by `pft`.

`fates_stoich_nitr` which is the nitrogen content in grams per gram carbon for each plant organ, is dimensioned `plant organ x pft`.  The nitrogen content of tissues, even with parteh mode 1 (c-only) is still important because it affects autotrophic respiration rates.


## The nutrient enabled allometric growth hypothesis.

This mode is enabled by setting the namelist parameter:

> fates_parteh_mode = 2

As of 1/31/23, prescribed nutrient uptake is available in CLM, and both prescribed and fully dynamic nutrient uptake is available in ELM.

If the user wants to prescribe nutrient uptake, they can set `fates_cnp_prescribed_nuptake` and `fates_cnp_prescribed_puptake` to a non-zero value.  This value specifies the fraction of potential N and P uptake that can be generated by aqueous (mineral nutrient) acquisition that is actually produced in plant uptake.  When this is non-zero, it will disconnect nutrient uptake from the soil biogeochemistry scheme in ELM/CLM.  When this value is set to zero, is signals that nutrient cycling, and mineral acquisition should be fully coupled with the soil biogeochemistry scheme.

For ELM, the user can choose to pair nutrient dynamics with either a capacitance based nutrient competition scheme (ECA) or a Relative Demand (RD) scheme.  This is specified with xmlchange calls, which should be executed in the case directory following the create_case command:

> ./xmlchange --append ELM_BLDNML_OPTS="-nutrient cnp -nutrient_comp_pathway rd -soil_decomp century"

or 

> ./xmlchange --append ELM_BLDNML_OPTS="-nutrient cnp -nutrient_comp_pathway eca -soil_decomp century"

Note: FATES should be compatible with ELM's CTC decomposition method as well.

Key parameters: 

All parameters prefixed by `fates_cnp_*`, short for carbon-nitrogen-phosphorus.

`fates_stoich_nitr` and 'fates_stoich_phos` are important.  Stoichiometries impact construction costs of new tissues, which can now be limited by availability. Nitrogen concentrations, like with parteh_mode=1, still impact respiration rates as well.

`fates_cnp_turnover_nitr_retrans` and `fates_cnp_turnover_phos_retrans` specify reabsorption rates on scenecent turnover.

`fates_cnp_pid_kd`,`fates_cnp_pid_ki` and `fates_cnp_pid_kp` will control how responsive the fine-root adaptation algorithm is to changes in nutrient/carbon availability.
